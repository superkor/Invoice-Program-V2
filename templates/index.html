<html>
    <head>
        <title> Invoice Program </title>
        <script src="{{ url_for('static', filename='js/indexScript.js')}}"></script>
        <script src="{{ url_for('static', filename='js/jquery.js')}}"></script>
    </head>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/indexStyles.css')}}">
    <body onload="onLoad()">
        <header onClick="window.location.href='{{url_for('home')}}'">
            <h1>Invoice Program</h1>
        </header>
        <div id = "main">
            <!-- After creating invoice, notification on successful creation will show (will provide download link to the invoice itself) -->
            <div class = "notification" style="display:none">
                <a id="invoice"></a>
            </div>

            <div class="tab">
                <button id = "createButton" class="tablink active" onclick="openTab(event, 'create')">Invoice Creation</button>
                <button id = "importButton" class="tablink" onclick="openTab(event, 'import')">Import Invoice</button>
                <button id = "summaryButton" class="tablink" onclick="openTab(event, 'summary')">Summary of Invoices</button>
            </div>
    
            <div id="create" class="tabcontent" style="display:block">
                <form action="create" method="GET" enctype="multipart/form-data">
                    <div id = "SeasonDiv">
                        <label for="season">Season</label>
                        <!-- Will add a function to populate seasons based on what invoice template exists -->
                        <select name = "season" required id = "season" onchange="onChange()">
                            <option value ="" selected disabed hidden>Select a season</option>
                            <option value = "2019-2020">2019-2020</option>
                            <option value = "2020-2021">2020-2021</option>
                            <option value = "2021-2022">2021-2022</option>
                            <option value = "2022-2023">2022-2023</option>
                        </select>
                    </div>
                    <div id = "Month">
                        <!-- Function addMonthOptions() adds options for dropdown -->
                        <label for="month">Month</label>
                        <select name = "month" id="monthDropDown" required onchange="onChange()">
                        </select>
                    </div>
                    <div id = "Name">
                        <label for="name">Name</label>
                        <input type="text" name="name" value="" placeholder="Name of Coach" required oninvalid="this.setCustomValidity('test')" oninput="this.setCustomValidity('')"> 
                    </div>
                    <div id = "Rate">
                        <label for="rate">Hourly Rate</label>
                        <input type="number" name="rate" value="" placeholder="Hourly Rate" required>
                    </div>
    
                    <div id = "Comments">
                        <label for="comments">Comments</label>
                        <textarea name="comments" id="comments" rows="4" cols="50" style="white-space: pre-wrap"></textarea>
                    </div>
                    <div id = "List-Of-Sessions">
                        <div id = "Session0">
                            <span>
                                <select name = "session-type" required>
                                    <option value="" selected disabled hidden>Select Session</option>
                                    <option value="PCS">Pre-Canskate (PCS)</option>
                                    <option value="CS" >Canskate (CS)</option>
                                    <option value="FZ" class = "FZ">Fun Zone (FZ)</option>
                                    <option value="IN" class = "IN" disabled hidden>Intermediate (IN)</option>
                                    <option value="NV" class = "NV">Novice (NV)</option>
                                    <option value="JR" class = "JR">Junior (JR)</option>
                                    <option value="PEP">Performance Enrichment Program (PEP)</option>
                                    <option value="AD">Adult (AD)</option>
                                    <option value="PW">Power (PW)</option>
                                    <option value="ST">Stroking (ST)</option>
                                    <option value="CIR" class = "CIR">Canskate - Circuit Drawing (CIR)</option>
                                    <option value="RPT" class = "RPT">Pre-Canskate/Canskate - Report Card (RPT)</option>
                                </select>
                            </span>
                            <span>
                                <input type="number" name="session-amount" placeholder="Number of Sessions" required>
                            </span>
                            <span>
                                <input type="date" name="date-of-session" class = "dateSelection" required>
                            </span>
                        </div>
                    </div>
                    <!-- addSession() on button adds new div to add new sessions. each new session div will have a delete button that will delete the created session div -->
                    <div id="AddSession">
                        <input type="button" name="add-session" value = "Add Session" onclick="addSession()">
                    </div>
                    <div>
                        <input type="submit" value="Submit">
                    </div>
                </form>
            </div>
    
            <div id="summary" class="tabcontent">
                <button onclick="seasonDropDown('2019-2020')" class="dropdownbtn">2019-2020</button>
                <div id = "2019-2020" class="seasonDropdown" display="none">
                    <br>
                    <div class="seasonTable"></div>
                    <div class="monthInformation"></div>
                </div>
                <button onclick="seasonDropDown('2020-2021')" class="dropdownbtn">2020-2021</button>
                <div id = "2020-2021" class="seasonDropdown" display="none">
                    <br>
                    <div class="seasonTable"></div>
                    <div class="monthInformation"></div>
                </div>
                <button onclick="seasonDropDown('2021-2022')" class="dropdownbtn">2021-2022</button>
                <div id = "2021-2022" class="seasonDropdown" display="none">
                    <br>
                    <div class="seasonTable"></div>
                    <div class="monthInformation"></div>
                </div>
                <button onclick="seasonDropDown('2022-2023')" class="dropdownbtn">2022-2023</button>
                <div id = "2022-2023" class="seasonDropdown" display="none">
                    <br>
                    <div class="seasonTable"></div>
                    <br>Links to Invoices:<br>
                    <div class="monthInformation"></div>
                </div>
            </div>
        </div>
                
        <div id ="import" class = "tabcontent">
            Import Invoice
            <div>            
                <form id="import-invoice" method="POST" enctype="multipart/form-data">
                    <div>
                        <label for="inputInvoice">Select an invoice:</label>
                        <input type="file" id="inputInvoice" name="inputInvoice" accept=".xlsx">
                    </div>
                    <div>
                        <input type="button" value="Submit" id = "upload-file-submit" onclick="uploadInvoice()">
                    </div>
                </form>
            </div>
            <div id="importInfo">
                
            </div>
            <div id = "calDiv">
            </div>
            
        </div>

        <!-- Confirmation div after input for Invoice Creation -->
        <div id = "fromCreate" style="display:none">
            <!-- Sent input data -->
            <h1>Confirm Input</h1>
            <div>
                <h5>Season</h5>
                <p>{{ season }}</p>
                <h5>Month</h5>
                <p>{{ month }}</p>
                <h5>Name</h5>
                <p>{{ name }}</p>
                <h5>Rate</h5>
                <p>{{ rate }}</p>
                <h5>Comments</h5>
                <p>{{ comments }}</p>
                <h5>Sessions</h5>
                <div id="result">{{ sessions }}</div>
            </div>
            <input type="button" id="confirmButton" value="Confirm" onClick="createInvoice()">
            <input type="button" id="cancelButton" value="Cancel" onClick="window.location.href='{{url_for('home')}}'">
        </div>      
    </body>
</html>